{% extends "students/base.html" %}

{% load i18n %}

{% load static from staticfiles %}

{% block meta_title %}{% trans 'Exams Results' %}{% endblock meta_title %}

{% block extra_css %}

<style>

	form {
		float: left;
		width: 100%;
		background-color: #d9edf7;
		padding-left:15px;
		padding-top:15px;
		padding-bottom:15px;
		color:black;

		}

	.label {

		float:center;
    	color: black;
    	display: inline;
    	font-size: 110%;
    	font-weight: 700;
    	line-height: 2;
    	text-align: right;
    	white-space: nowrap;
			
		}
	
</style>

{% endblock extra_css %}

{% block exam %}
<li role ="presentation">
	  <a href="{% url 'exams' %}">{% trans 'Exams' %}</a>
</li>
{% endblock exam %}

{% block menu %}
<li role ="presentation" {% if '/results/' in request.path %}
	class="active" {% endif %}>
	<a href="{% url 'results' %}">{% trans 'Exams Results' %}</a>
</li>
{% endblock menu %}

{% block title %}{% trans 'Exams Results' %}{% endblock title %}

{% block content %}

	<!-- Exam-->

  <!-- Add Result Button-->
  {% if user.is_authenticated %}

	<a href="{% url 'results_add' %}" class="result-add-form-link"><button class ="btn btn-primary"><i class="fa fa-list" aria-hidden="true"></i>{% trans ' Add Exam Result' %}</button></a>

  <!-- Add Result Button without link to modal window -->
  {% else %}

    <a href="{% url 'results_add' %}"><button class ="btn btn-primary"><i class="fa fa-list" aria-hidden="true"></i>
    {% trans ' Add Exam Result' %}</button></a>

  {% endif %}

<table class="table table-hover table-striped">
{% with order_by=request.GET.order_by reverse=request.GET.reverse %}
	<thead>
	<tr>
		<th><a href="{% url 'results' %}">â„–</a></th>
		<th>
		  <a href="{% url "results" %}?order_by=exams{% if order_by == 'exams' and reverse != '1' %}&amp;reverse=1{% endif %}">
          {% trans 'Exam' %}
          {% if order_by == 'exams' and reverse != '1' %}&uarr;
          {% elif order_by == 'exams' and reverse == '1' %}&darr;
          {% endif %}
        </a>
      </th>
      <th>
        <a href="{% url "results" %}?order_by=groups{% if order_by == 'groups' and reverse != '1' %}&amp;reverse=1{% endif %}">
         {% trans 'Group' %}
          {% if order_by == 'groups' and reverse != '1' %}&uarr;
          {% elif order_by == 'groups' and reverse == '1' %}&darr;
          {% endif %}
      </a>
      </th>
      <th>
        <a href="{% url "results" %}?order_by=students{% if order_by == 'students' and reverse != '1' %}&amp;reverse=1{% endif %}">
          {% trans 'Student' %}
          {% if order_by == 'students' and reverse != '1' %}&uarr;
          {% elif order_by == 'students' and reverse == '1' %}&darr;
          {% endif %}
      </a>
      </th>
      <th>
        <a href="{% url "results" %}?order_by=results_exam{% if order_by == 'results_exam' and reverse != '1' %}&amp;reverse=1{% endif %}">
          {% trans 'Result' %}
          {% if order_by == 'results_exam' and reverse != '1' %}&uarr;
          {% elif order_by == 'results_exam' and reverse == '1' %}&darr;
          {% endif %}
      </a>
      </th>

	  <th>{% trans 'Actions' %}</th>
	</tr>
	{% endwith %}
	</thead> 

<tbody>

	{% for result in results %}
	<tr>

	<!-- Content for authenticated users -->
	{% if user.is_authenticated %}

		<td>{{ forloop.counter }}</td>
		<td><a title="{% trans 'Edit' %}" href="{% url 'results_edit' result.id %}" class ="modal-edit-form-link">{{ result.exams }}
		</a></td>
		<td><a title="{% trans 'Edit' %}" href="{% url 'results_edit' result.id %}" class ="modal-edit-form-link">{{ result.groups }}</a></td>
		<td><a title="{% trans 'Edit' %}" href="{% url 'results_edit' result.id %}" class ="modal-edit-form-link">{{ result.students }}
		</a></td>
		<td><a title="{% trans 'Edit' %}" href="{% url 'results_edit' result.id %}" class ="modal-edit-form-link">{{ result.results_exam }}
		</a></td>
		<td>
			<div class="dropdown">
				<button class="btn btn-default dropdown-toggle"
							type="button" data-toggle="dropdown">{% trans 'Action' %}
				<span class="caret"></span>
				</button>
				<ul class="dropdown-menu" role ="menu">
					<li role="presentation">
						<a role ="menuitem" tabindex ="-1"
							href ="{% url 'results_edit' result.id %}">{% trans 'Result' %}</a>
					</li>
					<li role="presentation">
						<a role="menuitem" tabindex="-1" 
						href="{% url 'results_edit' result.id %}" class ="modal-edit-form-link">
						{% trans 'Edit' %}</a>
					</li>
					<li role="presentation">
						<a role="menuitem" tabindex="-1" class ="modal-delete-form-link"   
							href="{% url 'results_delete' result.id %}">
							{% trans 'Delete' %}</a>
					</li>
				</ul>
						
			</div>
		</td>

	<!-- Content for anonim users -->
	<!-- all links redirect to login form -->
	{% else %}

		<td>{{ forloop.counter }}</td>
		<td><a title="{% trans 'Edit' %}" href="{% url 'results_edit' result.id %}">{{ result.exams }}
		</a></td>
		<td><a title="{% trans 'Edit' %}" href="{% url 'results_edit' result.id %}">{{ result.groups }}</a></td>
		<td><a title="{% trans 'Edit' %}" href="{% url 'results_edit' result.id %}">{{ result.students }}
		</a></td>
		<td><a title="{% trans 'Edit' %}" href="{% url 'results_edit' result.id %}">{{ result.results_exam }}
		</a></td>
		<td>
			<div class="dropdown">
				<button class="btn btn-default dropdown-toggle"
							type="button" data-toggle="dropdown">{% trans 'Action' %}
				<span class="caret"></span>
				</button>
				<ul class="dropdown-menu" role ="menu">
					<li role="presentation">
						<a role ="menuitem" tabindex ="-1"
							href ="{% url 'results_edit' result.id %}">{% trans 'Result' %}</a>
					</li>
					<li role="presentation">
						<a role="menuitem" tabindex="-1" 
						href="{% url 'results_edit' result.id %}">
						{% trans 'Edit' %}</a>
					</li>
					<li role="presentation">
						<a role="menuitem" tabindex="-1" 
						href="{% url 'results_delete' result.id %}">{% trans 'Delete' %}</a>
					</li>
				</ul>
						
			</div>
		</td>

	{% endif %}

	</tr>
		
   {% endfor %}

</tbody>
</table>

		<!-- End Exam-->

	{% endblock content %}

	{% block pagination %}
			
		{% with object_list=results %}
      			{% include "students/pagination.html" %}
    		{% endwith %}

	{% endblock pagination %}
